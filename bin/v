#!/bin/bash
# If we have a colon we are going to open file at a certain line number
if [[ $1 == *":"* ]]
then
  # Split Line/Function from Filename into an array
  PARTS=($(echo $1 | sed 's/\(:\)/\'$'\n\1/g'))
  # Get the filename
  FILE=${PARTS[0]}
  # Get the linenumber (numbers only, no weird stuff thanks)
  LN=$(echo ${PARTS[1]} | sed -e 's/[^0-9]//g')
  # Open the file at line in new window
  (mvim $FILE -c :$LN &)
else
	if [ ! -f "$1" ]
	then
		read -p "Touch file: \"$1\"? (y/n) " DOTOUCH;
		if [ "$DOTOUCH" == "y" ]; then
		  touch $1
			echo "Touched file: \"$1\""
    fi
	fi
	# Open the file in the existing window
	open -a MacVim.app $1
fi

